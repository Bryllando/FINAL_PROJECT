<!-- dashboard/admin.html -->
{% extends "base.html" %}

{% block content %}
<div class="flex justify-between items-center w-full px-6 py-4 text-white">
    <h1 class="text-xl font-bold">Python(19877) 8:00 - 10:30 A.M</h1>
    <a href="/" class="bg-green-500 hover:bg-green-600 px-4 py-1 rounded text-sm font-bold transition">LOGOUT</a>
</div>
{% endblock %}

{% block mainContent %}
<div class="flex min-h-[calc(100vh-80px)]">

    <aside class="w-64 bg-white shadow-xl hidden md:block border-r border-gray-200">
        <div class="p-4 border-b">
            <div class="flex items-center gap-2 text-gray-700">
                <span class="font-bold text-lg">â‰¡ DASHBOARD</span>
            </div>
        </div>
        <nav class="mt-4">
            <a href="{{ url_for('admin') }}"
                class="flex items-center px-6 py-4 text-gray-700 bg-gray-100 border-l-4 border-[#1a237e]">
                User management
            </a>
            <a href="{{ url_for('student_mngt') }}"
                class="flex items-center px-6 py-4 text-gray-700 hover:bg-gray-100 transition">
                Student management
            </a>
            <a href="#" class="flex items-center px-6 py-4 text-gray-700 hover:bg-gray-100 transition">
                Attendance
            </a>
        </nav>
        <div class="absolute bottom-20 w-64 p-4">
            <a href="{{ url_for('logout') }}" class="flex items-center text-gray-600 hover:text-red-500 transition">
                LOGOUT
            </a>
        </div>
    </aside>

    <div class="flex-1 p-8">
        <div class="mb-6">
            <h2 class="text-2xl font-bold text-gray-800">User Management</h2>
        </div>

        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="p-4 border-b">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-gray-700">Registered Users</h3>
                    <button onclick="window.location.href='{{ url_for('register') }}'"
                        class="bg-[#4caf50] hover:bg-green-600 text-white px-4 py-2 rounded shadow transition">
                        ADD NEW USER
                    </button>
                </div>
            </div>

            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-[#374151] text-white text-sm uppercase">
                        <th class="px-6 py-4 font-semibold">ID</th>
                        <th class="px-6 py-4 font-semibold">EMAIL</th>
                        <th class="px-6 py-4 font-semibold">PASSWORD</th>
                        <th class="px-6 py-4 font-semibold text-center">ACTION</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100 text-gray-600 text-sm">
                    {% for user in users %}
                    <tr class="hover:bg-gray-50 transition">
                        <td class="px-6 py-4 font-bold text-blue-600">{{ user['id'] }}</td>
                        <td class="px-6 py-4">{{ user['email'] }}</td>
                        <td class="px-6 py-4">********</td>
                        <td class="px-6 py-4 flex justify-center gap-2">
                            <button onclick="editUser('{{ user.id }}', '{{ user.email }}', '{{ user.password }}')"
                                class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded transition">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z">
                                    </path>
                                </svg>
                            </button>

                            <a href="{{ url_for('delete_user_route', id=user['id']) }}"
                                class="bg-red-500 hover:bg-red-600 text-white p-2 rounded transition"
                                onclick="return confirm('Are you sure you want to delete this user?')">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                                    </path>
                                </svg>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // Function to populate form for Editing (if you want modal editing)
    function editUser(id, email, password) {
        alert('Edit functionality for user ID: ' + id + '\nEmail: ' + email);
        // For full edit functionality, you would need a modal or edit page
        // window.location.href = '/edit_user/' + id;
    }
</script>
{% endblock %}